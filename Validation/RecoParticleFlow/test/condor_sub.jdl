#This condor submission file runs the RECO step in N jobs on a single RelVal file
Universe = vanilla

Executable = $ENV(CMSSW_BASE)/src/Validation/RecoParticleFlow/test/run_relval.sh
Arguments = "QCD reco $(Process)"

Log = log/test.$(Cluster).log
Output = log/test.out.$(Cluster).$(Process)
Error = log/test.err.$(Cluster).$(Process)
Environment = "CMSSW_BASE=$ENV(CMSSW_BASE) PERJOB=100"

#Requirements=(TARGET.OpSysAndVer=="CentOS7")
RequestMemory = 2000
RequestCpus = 1
+MaxRuntime = 7200

#choose job environment using singularity
+RunAsOwner = True
+SleepSlot = True
+InteractiveUser = true
+SingularityImage = "/cvmfs/singularity.opensciencegrid.org/bbockelm/cms:rhel6"
+SingularityBindCVMFS = True
run_as_owner = True

#transfer section
transfer_output_files = QCD/step3.log,QCD/step3.root
transfer_output_remaps = "step3.log=step3.$(Cluster).$(Process).log;step3.root=step3.$(Cluster).$(Process).root"
should_transfer_files = YES
when_to_transfer_output = ON_EXIT

Queue 50
